{"ast":null,"code":"import service from '../services/anecdoteService';\n\nconst getId = () => (100000 * Math.random()).toFixed(0);\n\nconst reducer = (state = [], action) => {\n  switch (action.type) {\n    case 'VOTE':\n      const {\n        id\n      } = action.data;\n      const anecdote = state.find(n => n.id === id);\n      const votedAnecdote = { ...anecdote,\n        votes: anecdote.votes + 1\n      };\n      return state.map(a => a.id === id ? votedAnecdote : a);\n\n    case 'ADD':\n      return [...state, action.data];\n\n    case 'INIT':\n      return action.data;\n\n    default:\n      return state;\n  }\n};\n\nexport const voteAnecdote = id => {\n  return {\n    type: 'VOTE',\n    data: {\n      id\n    }\n  };\n};\nexport const addAnecdote = anecdote => {\n  return async dispatch => {\n    let newAnec = await service.createNew(anecdote);\n    dispatch({\n      type: 'ADD',\n      data: newAnec\n    });\n  };\n};\nexport const init = () => {\n  return async dispatch => {\n    let anecdotes = await service.getAll();\n    dispatch({\n      type: 'INIT',\n      data: anecdotes\n    });\n  };\n};\nexport default reducer;","map":{"version":3,"sources":["/Users/akukettunen/Desktop/FS2021/osa6/redux-anecdotes/src/reducers/anecdoteReducer.js"],"names":["service","getId","Math","random","toFixed","reducer","state","action","type","id","data","anecdote","find","n","votedAnecdote","votes","map","a","voteAnecdote","addAnecdote","dispatch","newAnec","createNew","init","anecdotes","getAll"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,6BAApB;;AAEA,MAAMC,KAAK,GAAG,MAAM,CAAC,SAASC,IAAI,CAACC,MAAL,EAAV,EAAyBC,OAAzB,CAAiC,CAAjC,CAApB;;AAEA,MAAMC,OAAO,GAAG,CAACC,KAAK,GAAG,EAAT,EAAaC,MAAb,KAAwB;AACtC,UAAOA,MAAM,CAACC,IAAd;AACE,SAAK,MAAL;AACE,YAAM;AAAEC,QAAAA;AAAF,UAASF,MAAM,CAACG,IAAtB;AACA,YAAMC,QAAQ,GAAGL,KAAK,CAACM,IAAN,CAAWC,CAAC,IAAIA,CAAC,CAACJ,EAAF,KAASA,EAAzB,CAAjB;AACA,YAAMK,aAAa,GAAG,EAAC,GAAGH,QAAJ;AAAcI,QAAAA,KAAK,EAAEJ,QAAQ,CAACI,KAAT,GAAiB;AAAtC,OAAtB;AACA,aAAOT,KAAK,CAACU,GAAN,CAAUC,CAAC,IAAIA,CAAC,CAACR,EAAF,KAASA,EAAT,GAAcK,aAAd,GAA8BG,CAA7C,CAAP;;AACF,SAAK,KAAL;AACE,aAAO,CAAC,GAAGX,KAAJ,EAAWC,MAAM,CAACG,IAAlB,CAAP;;AACF,SAAK,MAAL;AACE,aAAOH,MAAM,CAACG,IAAd;;AACF;AACA,aAAOJ,KAAP;AAXF;AAaD,CAdD;;AAgBA,OAAO,MAAMY,YAAY,GAAGT,EAAE,IAAI;AAChC,SAAO;AACLD,IAAAA,IAAI,EAAE,MADD;AAELE,IAAAA,IAAI,EAAE;AAAED,MAAAA;AAAF;AAFD,GAAP;AAID,CALM;AAOP,OAAO,MAAMU,WAAW,GAAGR,QAAQ,IAAI;AACrC,SAAO,MAAMS,QAAN,IAAkB;AACvB,QAAIC,OAAO,GAAG,MAAMrB,OAAO,CAACsB,SAAR,CAAkBX,QAAlB,CAApB;AACAS,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,KADC;AAEPE,MAAAA,IAAI,EAAEW;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,OAAO,MAAME,IAAI,GAAG,MAAM;AACxB,SAAO,MAAMH,QAAN,IAAkB;AACvB,QAAII,SAAS,GAAG,MAAMxB,OAAO,CAACyB,MAAR,EAAtB;AACAL,IAAAA,QAAQ,CAAC;AACPZ,MAAAA,IAAI,EAAE,MADC;AAEPE,MAAAA,IAAI,EAAEc;AAFC,KAAD,CAAR;AAID,GAND;AAOD,CARM;AAUP,eAAenB,OAAf","sourcesContent":["import service from '../services/anecdoteService'\n\nconst getId = () => (100000 * Math.random()).toFixed(0)\n\nconst reducer = (state = [], action) => {\n  switch(action.type) {\n    case 'VOTE':\n      const { id } = action.data\n      const anecdote = state.find(n => n.id === id)\n      const votedAnecdote = {...anecdote, votes: anecdote.votes + 1}\n      return state.map(a => a.id === id ? votedAnecdote : a)\n    case 'ADD':\n      return [...state, action.data]\n    case 'INIT':\n      return action.data\n    default:\n    return state\n  }\n}\n\nexport const voteAnecdote = id => {\n  return {\n    type: 'VOTE',\n    data: { id }\n  }\n}\n\nexport const addAnecdote = anecdote => {\n  return async dispatch => {\n    let newAnec = await service.createNew(anecdote)\n    dispatch({\n      type: 'ADD',\n      data: newAnec\n    })\n  }\n}\n\nexport const init = () => {\n  return async dispatch => {\n    let anecdotes = await service.getAll()\n    dispatch({\n      type: 'INIT',\n      data: anecdotes\n    })\n  }\n}\n\nexport default reducer"]},"metadata":{},"sourceType":"module"}